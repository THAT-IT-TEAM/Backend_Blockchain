{
  "contractName": "ExpenseTracker",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_companyRegistry",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_userRegistry",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "expenseId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "approver",
          "type": "address"
        }
      ],
      "name": "ExpenseApproved",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "expenseId",
          "type": "uint256"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "company",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "category",
          "type": "string"
        }
      ],
      "name": "ExpenseCreated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "expenseId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "ExpensePaid",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "reimbursementId",
          "type": "uint256"
        }
      ],
      "name": "ReimbursementProcessed",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "reimbursementId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "expenseId",
          "type": "uint256"
        }
      ],
      "name": "ReimbursementRequested",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "expenseId",
          "type": "uint256"
        }
      ],
      "name": "approveExpense",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "companyRegistry",
      "outputs": [
        {
          "internalType": "contract CompanyRegistry",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "companyAddress",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        },
        {
          "internalType": "string",
          "name": "category",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "description",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "receiptHash",
          "type": "string"
        }
      ],
      "name": "createExpense",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "expenseCounter",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "expenses",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "id",
          "type": "uint256"
        },
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "companyAddress",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        },
        {
          "internalType": "string",
          "name": "category",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "description",
          "type": "string"
        },
        {
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        },
        {
          "internalType": "bool",
          "name": "isApproved",
          "type": "bool"
        },
        {
          "internalType": "bool",
          "name": "isPaid",
          "type": "bool"
        },
        {
          "internalType": "string",
          "name": "receiptHash",
          "type": "string"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "expenseId",
          "type": "uint256"
        }
      ],
      "name": "getExpense",
      "outputs": [
        {
          "components": [
            {
              "internalType": "uint256",
              "name": "id",
              "type": "uint256"
            },
            {
              "internalType": "address",
              "name": "user",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "companyAddress",
              "type": "address"
            },
            {
              "internalType": "uint256",
              "name": "amount",
              "type": "uint256"
            },
            {
              "internalType": "string",
              "name": "category",
              "type": "string"
            },
            {
              "internalType": "string",
              "name": "description",
              "type": "string"
            },
            {
              "internalType": "uint256",
              "name": "timestamp",
              "type": "uint256"
            },
            {
              "internalType": "bool",
              "name": "isApproved",
              "type": "bool"
            },
            {
              "internalType": "bool",
              "name": "isPaid",
              "type": "bool"
            },
            {
              "internalType": "string",
              "name": "receiptHash",
              "type": "string"
            }
          ],
          "internalType": "struct ExpenseTracker.Expense",
          "name": "",
          "type": "tuple"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "category",
          "type": "string"
        }
      ],
      "name": "getExpensesByCategory",
      "outputs": [
        {
          "internalType": "uint256[]",
          "name": "",
          "type": "uint256[]"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        }
      ],
      "name": "getUserExpenses",
      "outputs": [
        {
          "internalType": "uint256[]",
          "name": "",
          "type": "uint256[]"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "expenseId",
          "type": "uint256"
        }
      ],
      "name": "payExpense",
      "outputs": [],
      "stateMutability": "payable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "reimbursementId",
          "type": "uint256"
        }
      ],
      "name": "processReimbursement",
      "outputs": [],
      "stateMutability": "payable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "reimbursementCounter",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "reimbursements",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "expenseId",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        },
        {
          "internalType": "bool",
          "name": "processed",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "expenseId",
          "type": "uint256"
        }
      ],
      "name": "requestReimbursement",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "userExpenses",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "userRegistry",
      "outputs": [
        {
          "internalType": "contract UserRegistry",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "bytecode": "0x6080604052348015600f57600080fd5b50604051611e4b380380611e4b833981016040819052602c916077565b600080546001600160a01b039384166001600160a01b0319918216179091556001805492909316911617905560a5565b80516001600160a01b0381168114607257600080fd5b919050565b60008060408385031215608957600080fd5b609083605c565b9150609c60208401605c565b90509250929050565b611d97806100b46000396000f3fe6080604052600436106100e85760003560e01c8063b30b60ec1161008a578063ce4061c411610059578063ce4061c4146102de578063ddcad2ae146102f1578063f63d340314610307578063fe45f9981461032757600080fd5b8063b30b60ec14610221578063b579e7f114610237578063c51aba2b14610257578063c911e1d21461027757600080fd5b80635c7460d6116100c65780635c7460d614610166578063735e5db61461019e5780638021d84a146101cb578063af4afe0a146101eb57600080fd5b80630f3bf989146100ed57806311925e76146101235780633015a72714610138575b600080fd5b3480156100f957600080fd5b5061010d6101083660046116ba565b610347565b60405161011a91906116dc565b60405180910390f35b61013661013136600461171f565b6103b3565b005b34801561014457600080fd5b50610158610153366004611738565b610676565b60405190815260200161011a565b34801561017257600080fd5b50600154610186906001600160a01b031681565b6040516001600160a01b03909116815260200161011a565b3480156101aa57600080fd5b506101be6101b936600461171f565b6106a7565b60405161011a91906117a8565b3480156101d757600080fd5b506101366101e6366004611924565b610953565b3480156101f757600080fd5b5061020b61020636600461171f565b610cae565b60405161011a9a999897969594939291906119d3565b34801561022d57600080fd5b5061015860065481565b34801561024357600080fd5b5061013661025236600461171f565b610eaf565b34801561026357600080fd5b50600054610186906001600160a01b031681565b34801561028357600080fd5b506102bc61029236600461171f565b60046020526000908152604090208054600182015460028301546003909301549192909160ff1684565b604080519485526020850193909352918301521515606082015260800161011a565b6101366102ec36600461171f565b61101c565b3480156102fd57600080fd5b5061015860055481565b34801561031357600080fd5b5061010d610322366004611a5c565b6112f5565b34801561033357600080fd5b5061013661034236600461171f565b61145f565b6001600160a01b0381166000908152600360209081526040918290208054835181840281018401909452808452606093928301828280156103a757602002820191906000526020600020905b815481526020019060010190808311610393575b50505050509050919050565b600154604051630935e01b60e21b81523360048201526001600160a01b03909116906324d7806c90602401602060405180830381865afa1580156103fb573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061041f9190611a99565b6104445760405162461bcd60e51b815260040161043b90611abb565b60405180910390fd5b60008181526004602052604081205490036104a15760405162461bcd60e51b815260206004820152601c60248201527f5265696d62757273656d656e7420646f6573206e6f7420657869737400000000604482015260640161043b565b60008181526004602052604090206003015460ff16156105035760405162461bcd60e51b815260206004820152601f60248201527f5265696d62757273656d656e7420616c72656164792070726f63657373656400604482015260640161043b565b60008181526004602052604090206001015434101561056e5760405162461bcd60e51b815260206004820152602160248201527f496e73756666696369656e74207265696d62757273656d656e7420616d6f756e6044820152601d60fa1b606482015260840161043b565b60008181526004602081815260408084208054808652600284528286206001908101548888529590945260038201805460ff191685179055920154905191936001600160a01b0390931692839282156108fc029291818181858888f193505050501580156105e0573d6000803e3d6000fd5b506000838152600460205260409020600101543411156106465760008381526004602052604090206001015433906108fc9061061c9034611b13565b6040518115909202916000818181858888f19350505050158015610644573d6000803e3d6000fd5b505b60405183907fb629dfe5710c6c1fdac8d0fec5ff44b563ec5edb7b0424c8fae35e08fa9e9aa490600090a2505050565b6003602052816000526040600020818154811061069257600080fd5b90600052602060002001600091509150505481565b6107136040518061014001604052806000815260200160006001600160a01b0316815260200160006001600160a01b0316815260200160008152602001606081526020016060815260200160008152602001600015158152602001600015158152602001606081525090565b6000828152600260208181526040928390208351610140810185528154815260018201546001600160a01b039081169382019390935292810154909116928201929092526003820154606082015260048201805491929160808401919061077990611b2c565b80601f01602080910402602001604051908101604052809291908181526020018280546107a590611b2c565b80156107f25780601f106107c7576101008083540402835291602001916107f2565b820191906000526020600020905b8154815290600101906020018083116107d557829003601f168201915b5050505050815260200160058201805461080b90611b2c565b80601f016020809104026020016040519081016040528092919081815260200182805461083790611b2c565b80156108845780601f1061085957610100808354040283529160200191610884565b820191906000526020600020905b81548152906001019060200180831161086757829003601f168201915b505050918352505060068201546020820152600782015460ff8082161515604084015261010090910416151560608201526008820180546080909201916108ca90611b2c565b80601f01602080910402602001604051908101604052809291908181526020018280546108f690611b2c565b80156109435780601f1061091857610100808354040283529160200191610943565b820191906000526020600020905b81548152906001019060200180831161092657829003601f168201915b5050505050815250509050919050565b600154604051631f5bdf5d60e01b81523360048201526001600160a01b0390911690631f5bdf5d90602401602060405180830381865afa15801561099b573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109bf9190611a99565b610a015760405162461bcd60e51b8152602060048201526013602482015272155cd95c881b9bdd081c9959da5cdd195c9959606a1b604482015260640161043b565b600054604051632405672560e21b81526001600160a01b038781166004830152909116906390159c9490602401602060405180830381865afa158015610a4b573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610a6f9190611a99565b610ab45760405162461bcd60e51b815260206004820152601660248201527510dbdb5c185b9e481b9bdd081c9959da5cdd195c995960521b604482015260640161043b565b60008411610b045760405162461bcd60e51b815260206004820152601d60248201527f416d6f756e74206d7573742062652067726561746572207468616e2030000000604482015260640161043b565b60058054906000610b1483611b66565b909155505060408051610140810182526005548082523360208084019182526001600160a01b038a8116858701908152606086018b8152608087018b815260a088018b90524260c0890152600060e08901819052610100890181905261012089018b9052968752600294859052979095208651815593516001850180549184166001600160a01b0319928316179055905192840180549390921692169190911790559051600382015591519091906004820190610bd19082611bce565b5060a08201516005820190610be69082611bce565b5060c0820151600682015560e08201516007820180546101008086015115150261ff00199315159390931661ffff19909116179190911790556101208201516008820190610c349082611bce565b5050336000818152600360209081526040808320600580548254600181018455928652939094200191909155905490516001600160a01b03891693507f0d6857cda6ee8ec79ca32be18c909974a79e8eb0069adf049bba66e7d7bbc50c90610c9f9089908990611c8d565b60405180910390a45050505050565b60026020819052600091825260409091208054600182015492820154600383015460048401805493956001600160a01b0390811695931693919291610cf290611b2c565b80601f0160208091040260200160405190810160405280929190818152602001828054610d1e90611b2c565b8015610d6b5780601f10610d4057610100808354040283529160200191610d6b565b820191906000526020600020905b815481529060010190602001808311610d4e57829003601f168201915b505050505090806005018054610d8090611b2c565b80601f0160208091040260200160405190810160405280929190818152602001828054610dac90611b2c565b8015610df95780601f10610dce57610100808354040283529160200191610df9565b820191906000526020600020905b815481529060010190602001808311610ddc57829003601f168201915b505050600684015460078501546008860180549596929560ff8084169650610100909304909216935090610e2c90611b2c565b80601f0160208091040260200160405190810160405280929190818152602001828054610e5890611b2c565b8015610ea55780601f10610e7a57610100808354040283529160200191610ea5565b820191906000526020600020905b815481529060010190602001808311610e8857829003601f168201915b505050505090508a565b600154604051630935e01b60e21b81523360048201526001600160a01b03909116906324d7806c90602401602060405180830381865afa158015610ef7573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610f1b9190611a99565b610f375760405162461bcd60e51b815260040161043b90611abb565b6000818152600260205260408120549003610f645760405162461bcd60e51b815260040161043b90611ca6565b60008181526002602052604090206007015460ff1615610fc65760405162461bcd60e51b815260206004820152601860248201527f457870656e736520616c726561647920617070726f7665640000000000000000604482015260640161043b565b600081815260026020908152604091829020600701805460ff19166001179055905133815282917fe162d266e792d6e0f285a2273576dbe93b2fbcd9499160acece9637353977cc391015b60405180910390a250565b600154604051630935e01b60e21b81523360048201526001600160a01b03909116906324d7806c90602401602060405180830381865afa158015611064573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906110889190611a99565b6110a45760405162461bcd60e51b815260040161043b90611abb565b60008181526002602052604081205490036110d15760405162461bcd60e51b815260040161043b90611ca6565b60008181526002602052604090206007015460ff166111295760405162461bcd60e51b8152602060048201526014602482015273115e1c195b9cd9481b9bdd08185c1c1c9bdd995960621b604482015260640161043b565b600081815260026020526040902060070154610100900460ff16156111875760405162461bcd60e51b8152602060048201526014602482015273115e1c195b9cd948185b1c9958591e481c185a5960621b604482015260640161043b565b6000818152600260205260409020600301543410156111e85760405162461bcd60e51b815260206004820152601b60248201527f496e73756666696369656e74207061796d656e7420616d6f756e740000000000604482015260640161043b565b60008181526002602052604080822060078101805461ff001916610100179055600181015460039091015491516001600160a01b039091169282156108fc02929190818181858888f19350505050158015611247573d6000803e3d6000fd5b506000818152600260205260409020600301543411156112ad5760008181526002602052604090206003015433906108fc906112839034611b13565b6040518115909202916000818181858888f193505050501580156112ab573d6000803e3d6000fd5b505b807f34ca857199cbf778a0cb69fb1aa2736b94161c6dced7b4615c43ae029eb21648600260008481526020019081526020016000206003015460405161101191815260200190565b6060600060055467ffffffffffffffff8111156113145761131461187f565b60405190808252806020026020018201604052801561133d578160200160208202803683370190505b509050600060015b60055481116113c4578480519060200120600260008381526020019081526020016000206004016040516113799190611cd6565b6040518091039020036113b2578083838151811061139957611399611d4b565b6020908102919091010152816113ae81611b66565b9250505b806113bc81611b66565b915050611345565b5060008167ffffffffffffffff8111156113e0576113e061187f565b604051908082528060200260200182016040528015611409578160200160208202803683370190505b50905060005b828110156114565783818151811061142957611429611d4b565b602002602001015182828151811061144357611443611d4b565b602090810291909101015260010161140f565b50949350505050565b600154604051631f5bdf5d60e01b81523360048201526001600160a01b0390911690631f5bdf5d90602401602060405180830381865afa1580156114a7573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906114cb9190611a99565b61150d5760405162461bcd60e51b8152602060048201526013602482015272155cd95c881b9bdd081c9959da5cdd195c9959606a1b604482015260640161043b565b600081815260026020526040812054900361153a5760405162461bcd60e51b815260040161043b90611ca6565b6000818152600260205260409020600101546001600160a01b031633146115965760405162461bcd60e51b815260206004820152601060248201526f4e6f7420796f757220657870656e736560801b604482015260640161043b565b60008181526002602052604090206007015460ff166115ee5760405162461bcd60e51b8152602060048201526014602482015273115e1c195b9cd9481b9bdd08185c1c1c9bdd995960621b604482015260640161043b565b600680549060006115fe83611b66565b9091555050604080516080810182528281526000838152600260208181528483206003908101548286019081524286880190815260608701868152600680548852600486529689902097518855915160018801555193860193909355915193909101805460ff1916931515939093179092555491518381527f0ed48b67f62aaf35613c596e8d67d86f8bce0ea76e8717ffaa276b0819c5a77a9101611011565b80356001600160a01b03811681146116b557600080fd5b919050565b6000602082840312156116cc57600080fd5b6116d58261169e565b9392505050565b602080825282518282018190526000918401906040840190835b818110156117145783518352602093840193909201916001016116f6565b509095945050505050565b60006020828403121561173157600080fd5b5035919050565b6000806040838503121561174b57600080fd5b6117548361169e565b946020939093013593505050565b6000815180845260005b818110156117885760208185018101518683018201520161176c565b506000602082860101526020601f19601f83011685010191505092915050565b6020815281516020820152600060208301516117cf60408401826001600160a01b03169052565b5060408301516001600160a01b03811660608401525060608301516080830152608083015161014060a084015261180a610160840182611762565b905060a0840151601f198483030160c08501526118278282611762565b91505060c084015160e084015260e084015161184861010085018215159052565b5061010084015180151561012085015250610120840151838203601f19016101408501526118768282611762565b95945050505050565b634e487b7160e01b600052604160045260246000fd5b600082601f8301126118a657600080fd5b813567ffffffffffffffff8111156118c0576118c061187f565b604051601f8201601f19908116603f0116810167ffffffffffffffff811182821017156118ef576118ef61187f565b60405281815283820160200185101561190757600080fd5b816020850160208301376000918101602001919091529392505050565b600080600080600060a0868803121561193c57600080fd5b6119458661169e565b945060208601359350604086013567ffffffffffffffff81111561196857600080fd5b61197488828901611895565b935050606086013567ffffffffffffffff81111561199157600080fd5b61199d88828901611895565b925050608086013567ffffffffffffffff8111156119ba57600080fd5b6119c688828901611895565b9150509295509295909350565b8a81526001600160a01b038a81166020830152891660408201526060810188905261014060808201819052600090611a0d90830189611762565b82810360a0840152611a1f8189611762565b90508660c084015285151560e0840152841515610100840152828103610120840152611a4b8185611762565b9d9c50505050505050505050505050565b600060208284031215611a6e57600080fd5b813567ffffffffffffffff811115611a8557600080fd5b611a9184828501611895565b949350505050565b600060208284031215611aab57600080fd5b815180151581146116d557600080fd5b60208082526022908201527f4f6e6c792061646d696e2063616e20706572666f726d2074686973206163746960408201526137b760f11b606082015260800190565b634e487b7160e01b600052601160045260246000fd5b81810381811115611b2657611b26611afd565b92915050565b600181811c90821680611b4057607f821691505b602082108103611b6057634e487b7160e01b600052602260045260246000fd5b50919050565b600060018201611b7857611b78611afd565b5060010190565b601f821115611bc957806000526020600020601f840160051c81016020851015611ba65750805b601f840160051c820191505b81811015611bc65760008155600101611bb2565b50505b505050565b815167ffffffffffffffff811115611be857611be861187f565b611bfc81611bf68454611b2c565b84611b7f565b6020601f821160018114611c305760008315611c185750848201515b600019600385901b1c1916600184901b178455611bc6565b600084815260208120601f198516915b82811015611c605787850151825560209485019460019092019101611c40565b5084821015611c7e5786840151600019600387901b60f8161c191681555b50505050600190811b01905550565b828152604060208201526000611a916040830184611762565b602080825260169082015275115e1c195b9cd948191bd95cc81b9bdd08195e1a5cdd60521b604082015260600190565b6000808354611ce481611b2c565b600182168015611cfb5760018114611d1057611d40565b60ff1983168652811515820286019350611d40565b86600052602060002060005b83811015611d3857815488820152600190910190602001611d1c565b505081860193505b509195945050505050565b634e487b7160e01b600052603260045260246000fdfea2646970667358221220559af7718f6d21702c8a9351d34b417cad38d0881424ffe1236a5229ab30d65864736f6c634300081e0033"
}